<!DOCTYPE html>
<html>
<head>
	<meta charset="utf8">
	<link rel="stylesheet" href="bundle.css">
	<style>
	.list:before {
		content: 'list';
		font-size:12px;
		color:rgba(100, 100, 100, 0.5)
	}
	.item:before {
		content: 'item';
		font-size:12px;
		color:rgba(100, 0, 100, 0.5)
	}
	</style>
	<script src="bundle.js"></script>
	<script>
window.addEventListener('load', function() {
	var dom = document.querySelector('.ProseMirror')
	var list = document.createElement('div')
	list.className = 'list'
	list.setAttribute('block', 'list')
	dom.appendChild(list)
	setTimeout(function() {
		var list = dom.querySelector('.list')
		addItem(list)
		addItem(list)
		console.log("current html after addition", dom.outerHTML)
		setTimeout(function() {
			var nblists = dom.querySelectorAll('.list').length
			if (nblists != 1) throw new Error("Nb lists found: " + nblists)
		}, 250)
	}, 250)

	function addItem(list) {
		var item = document.createElement('div')
		item.className = 'item'
		list.appendChild(item)
	}
})
	</script>
</head>
<body>
</body>
</html>
